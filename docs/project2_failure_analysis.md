# Project 2 백테스트 실패 분석

> **작성일**: 2025-11-23  
> **결론**: ✅ **현재 전략은 실패했습니다**

---

## 📊 백테스트 결과 요약

### 성과 지표
- **최종 수익률**: -1.93% ❌
- **벤치마크 (Buy & Hold)**: 116.41% ✅
- **초과 수익률**: -118.34% ❌
- **승률**: 50.0% (동전 던지기 수준)
- **Sharpe Ratio**: -0.08 (음수 = 위험 대비 수익 불량) ❌
- **MDD**: -13.73% (큰 손실 발생) ❌

**결론**: 현재 전략은 **명백히 실패**했습니다.

---

## 🔍 실패 원인 분석

### 1. 거래소 쌍별 성과

| 거래소 쌍 | 거래 횟수 | 승률 | 평균 수익률 | 총 수익 | 평가 |
|----------|----------|------|------------|---------|------|
| **binance_bitget** | 19회 | 63.2% | 0.47% | +8,433,989 KRW | ✅ 양호 |
| **upbit_bitget** | 10회 | 50.0% | -0.65% | -6,615,767 KRW | ⚠️ 보통 |
| **upbit_binance** | 11회 | 27.3% | -0.34% | -3,747,993 KRW | ❌ **실패** |

**핵심 문제**:
- `upbit_binance` 쌍의 승률이 27.3%로 매우 낮음 (11회 중 3회만 수익)
- `upbit_bitget` 쌍도 평균 수익률이 마이너스
- `binance_bitget` 쌍만 양호하지만 전체 손실을 상쇄하지 못함

### 2. 전략 문제점

#### 2.1 진입/청산 조건
- **현재**: Z-Score > 2.0 진입, Z-Score < 0.5 청산
- **문제**: 
  - 진입 조건이 너무 느슨할 수 있음 (너무 많은 거래 발생)
  - 청산 조건이 너무 빠를 수 있음 (이익 실현 기회 상실)

#### 2.2 거래소 쌍 선택
- **현재**: 가장 큰 Z-Score 절댓값을 가진 쌍 선택
- **문제**: 
  - `upbit_binance` 쌍이 자주 선택되지만 성과가 나쁨
  - 거래소 쌍별 성과를 고려하지 않음

#### 2.3 리스크 관리
- **현재**: 손절매 -3%, 최대 보유 30일
- **문제**: 
  - 손절매가 작동하지 않음 (모든 거래가 Z-Score 회귀로 청산)
  - MDD가 -13.73%로 큼 (리스크 관리 부족)

### 3. 데이터 기간 문제
- **기간**: 2024-01-01 ~ 2025-11-22 (약 2년)
- **문제**: 
  - 2024년 상반기는 강세장이었음 (Buy & Hold가 116% 수익)
  - 차익거래 전략은 횡보장에서 더 유리한데, 강세장에서는 불리함

---

## 🔧 개선 방안

### 1. 즉시 개선 (우선순위 높음)

#### 1.1 거래소 쌍 필터링
```python
# upbit_binance 쌍 제외 또는 조건 강화
if best_pair == 'upbit_binance':
    # 더 엄격한 조건 적용 (예: Z-Score > 2.5)
    if abs(z_score) > 2.5:  # 기존 2.0보다 엄격
        # 진입
```

#### 1.2 진입 조건 강화
- **현재**: Z-Score > 2.0
- **개선**: Z-Score > 2.5 또는 3.0 (더 확실한 기회만 선택)

#### 1.3 청산 조건 조정
- **현재**: Z-Score < 0.5
- **개선**: Z-Score < 0.0 (더 많은 이익 실현)

### 2. 중기 개선

#### 2.1 파라미터 최적화
- Z-Score threshold 그리드 서치
- 이동평균 기간 조정 (30일 → 20일 또는 60일)
- 손절매/청산 조건 최적화

#### 2.2 거래소 쌍별 가중치
- 성과가 좋은 쌍에 더 높은 가중치 부여
- 예: `binance_bitget` > `upbit_bitget` > `upbit_binance`

#### 2.3 리스크 관리 강화
- 손절매를 -2% 또는 -1.5%로 강화
- 포지션 크기 조정 (자본의 일정 비율만 투자)

### 3. 장기 개선

#### 3.1 시장 상황별 전략
- 강세장: 차익거래 전략 축소 또는 중단
- 횡보장: 차익거래 전략 확대
- 하락장: 역차익거래 전략 고려

#### 3.2 머신러닝 기반 신호 생성
- Z-Score 외 추가 특성 사용
- 거래소 쌍별 성과 예측 모델

---

## 📋 개선된 전략 테스트 계획

### 테스트 1: 거래소 쌍 필터링
- `upbit_binance` 쌍 제외
- 예상: 승률 향상, 전체 수익률 개선

### 테스트 2: 진입 조건 강화
- Z-Score > 2.5 또는 3.0
- 예상: 거래 횟수 감소, 승률 향상

### 테스트 3: 청산 조건 조정
- Z-Score < 0.0
- 예상: 평균 수익률 향상

### 테스트 4: 파라미터 최적화
- 그리드 서치로 최적 파라미터 찾기
- 예상: 전체 성과 최적화

---

## ✅ 결론

**현재 전략은 실패했습니다.**

**주요 원인**:
1. `upbit_binance` 쌍의 낮은 승률 (27.3%)
2. 진입/청산 조건이 최적화되지 않음
3. 강세장에서 차익거래 전략의 한계

**개선 필요**:
1. 거래소 쌍 필터링 (우선순위 높음)
2. 진입/청산 조건 최적화
3. 파라미터 튜닝

**다음 단계**: 개선된 전략으로 재백테스트 수행

