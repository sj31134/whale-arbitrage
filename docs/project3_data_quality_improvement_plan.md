# 프로젝트 3 데이터 품질 개선 계획

> **작성일**: 2025-11-23  
> **목적**: 데이터 기간 불일치 및 품질 문제 해결

---

## 1. 현재 데이터 상태

### 1.1 데이터 기간 비교

| 데이터 소스 | 기간 | 레코드 수 | 유효 데이터 비율 |
|------------|------|----------|----------------|
| **펀딩비** | 2022-12-31 ~ 2025-11-23 | 1,059건 | 92.4% (978건) |
| **변동성** | 2022-12-31 ~ 2025-11-23 | 1,059건 | 100% (1,059건) |
| **고래 데이터** | 2022-12-31 ~ 2025-11-23 | 1,059건 | 100% (1,059건) |
| **미결제약정 (OI)** | 2025-11-02 ~ 2025-11-23 | 22건 | 2.1% (22건) ⚠️ |

### 1.2 문제점

#### Critical 문제
1. **OI 데이터 부족**: 22일만 있음 (필요: 최소 1년 이상)
   - 다른 데이터 대비 1,037일 부족
   - OI 관련 특성(`oi_growth_7d`)이 의미 없음

#### 고래 데이터 문제 (해결 완료)
1. ✅ **이상치 처리 완료**:
   - `top100_richest_pct`: 4923% → 100%로 제한 (4건 수정)
   - `avg_transaction_value_btc`: 극단적 이상치 처리 (198건 수정)

---

## 2. OI 데이터 수집 개선 방안

### 2.1 현재 상황
- Binance API 제한: 최근 30일만 제공
- 현재 수집된 데이터: 22일 (2025-11-02 ~ 2025-11-23)

### 2.2 해결 방안

#### 방안 1: 매일 자동 수집 (권장) ⭐
**설명**: Binance API로 최근 30일 데이터를 매일 수집하여 축적

**장점**:
- 무료
- 자동화 가능
- 시간이 지나면 데이터 축적 (30일 후 30일치, 60일 후 60일치...)

**단점**:
- 과거 데이터는 수집 불가
- 시간이 오래 걸림 (1년 데이터 확보까지 1년 필요)

**구현**:
- 스크립트: `scripts/subprojects/risk_ai/collect_oi_historical.py`
- 실행: 매일 cron job 또는 스케줄러로 실행
- 예상: 30일 후 30일치, 1년 후 1년치 데이터 확보

#### 방안 2: 유료 API 사용
**설명**: CryptoQuant, Glassnode 등 유료 API 사용

**장점**:
- 과거 데이터 즉시 확보 가능
- 데이터 품질 우수

**단점**:
- 비용 발생 (월 $50~$200)
- API 키 발급 필요

**대상 서비스**:
- CryptoQuant: https://cryptoquant.com/
- Glassnode: https://glassnode.com/
- Coinglass: https://www.coinglass.com/ (API 키 필요)

#### 방안 3: OI 특성 제거 (임시 해결책)
**설명**: OI 관련 특성을 제거하고 다른 특성만 사용

**장점**:
- 즉시 적용 가능
- 데이터 일관성 확보

**단점**:
- 예측력 저하 가능
- OI 정보 손실

**구현**:
- `feature_engineering.py`에서 `oi_growth_7d` 제거
- `sum_open_interest` 특성도 제거

#### 방안 4: 대체 지표 사용
**설명**: OI 대신 거래량, 펀딩비 등 다른 지표 활용

**장점**:
- 즉시 사용 가능
- 과거 데이터 확보 가능

**단점**:
- OI 특유의 정보 손실
- 정확도 저하 가능

---

## 3. 고래 데이터 품질 개선 (완료)

### 3.1 처리 완료 사항
- ✅ `top100_richest_pct` 이상치 처리 (4건)
- ✅ `avg_transaction_value_btc` 이상치 처리 (198건)
- ✅ 0값 처리 (Forward Fill)

### 3.2 처리 결과
- `top100_richest_pct`: 최대값 100%로 제한
- `avg_transaction_value_btc`: 99% 분위수로 제한 후 Forward Fill
- 데이터 품질 개선 완료

---

## 4. 실행 계획

### 즉시 실행 (우선순위 1)

#### 4.1 OI 데이터 매일 자동 수집 설정
**목표**: 매일 최신 30일 데이터 수집하여 축적

**방법**:
1. `collect_oi_historical.py` 스크립트 실행
2. cron job 설정 (매일 자정 실행)
3. 또는 GitHub Actions, 스케줄러 활용

**예상 결과**:
- 30일 후: 30일치 데이터
- 1년 후: 1년치 데이터
- 3년 후: 3년치 데이터 (다른 데이터와 동일 기간)

#### 4.2 OI 특성 임시 제거
**목표**: 현재 데이터로 분석 가능하도록 조정

**방법**:
- `feature_engineering.py` 수정
- `oi_growth_7d`, `sum_open_interest` 특성 제거
- 모델 재학습

### 단기 (1주일 이내)

#### 4.3 데이터 정렬 검증 스크립트 개선
**목표**: 모든 변수가 동일 기간 데이터를 가지도록 검증

**방법**:
- `verify_data_alignment.py` 개선
- 데이터 정렬 로직 추가
- 공통 기간 자동 추출

### 중기 (1개월 이내)

#### 4.4 유료 API 검토 (선택사항)
**목표**: 과거 데이터 즉시 확보

**방법**:
- CryptoQuant/Glassnode API 키 발급
- 데이터 수집 스크립트 작성
- 비용 대비 효과 분석

---

## 5. 권장 사항

### 즉시 적용
1. ✅ **고래 데이터 이상치 처리 완료**
2. ⏳ **OI 데이터 매일 자동 수집 설정**
3. ⏳ **OI 특성 임시 제거** (데이터 축적될 때까지)

### 장기 계획
1. **매일 자동 수집**: 1년 후 충분한 데이터 확보 예상
2. **유료 API 검토**: 예산이 있다면 즉시 데이터 확보 가능
3. **대체 지표 연구**: OI 없이도 분석 가능한 방법 모색

---

## 6. 예상 타임라인

| 작업 | 기간 | 결과 |
|------|------|------|
| 고래 데이터 이상치 처리 | 완료 | ✅ |
| OI 매일 자동 수집 시작 | 즉시 | 30일 후 30일치 |
| OI 특성 제거 | 즉시 | 분석 가능 |
| 충분한 OI 데이터 확보 | 1년 | 1년치 데이터 |

---

**작성자**: AI Assistant  
**마지막 업데이트**: 2025-11-23




