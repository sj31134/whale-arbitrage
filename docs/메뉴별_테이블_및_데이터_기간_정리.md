# 메뉴별 테이블 및 데이터 기간 정리

> **작성일**: 2025-12-07  
> **데이터베이스**: `data/project.db` (SQLite)

---

## 📊 전체 테이블 데이터 기간 요약

| 테이블명 | 데이터 기간 | 레코드 수 |
|---------|-----------|----------|
| `upbit_daily` | 2022-08-11 ~ 2025-12-06 | 2,428건 |
| `binance_spot_daily` | 2022-08-11 ~ 2025-12-06 | 2,428건 |
| `bitget_spot_daily` | 2022-08-09 ~ 2025-12-05 | 2,428건 |
| `bybit_spot_daily` | 2022-08-11 ~ 2025-12-06 | 2,428건 |
| `exchange_rate` | 2022-08-11 ~ 2025-12-05 | 1,213건 |
| `binance_futures_metrics` | 2022-01-01 ~ 2025-12-06 | 2,872건 |
| `futures_extended_metrics` | 2022-01-30 ~ 2025-12-06 | 2,620건 |
| `bitinfocharts_whale` | 2022-12-31 ~ 2025-11-30 | 1,068건 |
| `whale_daily_stats` | 2022-01-01 ~ 2025-11-30 | 1,684건 |
| `binance_spot_weekly` | 2022-08-14 ~ 2025-11-30 | 346건 |
| `binance_futures_weekly` | 2022-08-14 ~ 2025-12-07 | 347건 |
| `bitinfocharts_whale_weekly` | 2023-01-01 ~ 2025-11-30 | 154건 |
| `whale_weekly_stats` | 2021-12-27 ~ 2025-11-10 | 248건 |

---

## 📋 메뉴별 사용 테이블 및 데이터 기간

### 1. 📊 차익거래 비용 계산기 (`cost_calculator_page.py`)

**사용 테이블:**
- `upbit_daily` - 업비트 일봉 데이터
- `binance_spot_daily` - 바이낸스 현물 일봉 데이터
- `bitget_spot_daily` - 비트겟 현물 일봉 데이터
- `bybit_spot_daily` - 바이비트 현물 일봉 데이터
- `exchange_rate` - 환율 데이터 (KRW/USD)

**데이터 기간:**
- **최소 기간**: 2022-08-11 (교집합 기준)
- **최대 기간**: 2025-12-05 (교집합 기준)
- **실제 사용 가능 기간**: `upbit_daily`, `binance_spot_daily`, `bitget_spot_daily`, `bybit_spot_daily`, `exchange_rate`의 교집합
  - BTC: 2022-08-11 ~ 2025-12-05
  - ETH: 2022-08-11 ~ 2025-12-05

**주요 기능:**
- 거래소 간 차익거래 비용 계산
- 백테스트 엔진을 통한 수익률 계산
- Z-Score 기반 진입/청산 조건

---

### 2. 🎯 최적 전략 추천 (`strategy_recommender_page.py`)

**사용 테이블:**
- `upbit_daily` - 업비트 일봉 데이터
- `binance_spot_daily` - 바이낸스 현물 일봉 데이터
- `bitget_spot_daily` - 비트겟 현물 일봉 데이터
- `bybit_spot_daily` - 바이비트 현물 일봉 데이터
- `exchange_rate` - 환율 데이터

**데이터 기간:**
- **최소 기간**: 2022-08-11
- **최대 기간**: 2025-12-05
- **실제 사용 가능 기간**: 차익거래 비용 계산기와 동일

**주요 기능:**
- 특정 날짜의 최적 차익거래 전략 추천
- 프리미엄 타임라인 분석 (전후 30일)

---

### 3. ⚠️ 리스크 예측 대시보드 (`risk_dashboard_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표 (펀딩비, OI, 변동성)
- `bitinfocharts_whale` - 고래 집중도 데이터
- `futures_extended_metrics` - 확장 선물 지표 (롱/숏 비율, Taker 압력)
- `whale_daily_stats` - 고래 일일 통계 (거래소 유입/유출)

**데이터 기간:**
- **일봉 분석**:
  - `binance_futures_metrics`: 2022-01-01 ~ 2025-12-06
  - `bitinfocharts_whale`: 2022-12-31 ~ 2025-11-30
  - `futures_extended_metrics`: 2022-01-30 ~ 2025-12-06
  - `whale_daily_stats`: 2022-01-01 ~ 2025-11-30
  - **실제 사용 가능 기간**: 2022-12-31 ~ 2025-11-30 (교집합 기준)

- **주봉 분석**:
  - `binance_spot_weekly`: 2022-08-14 ~ 2025-11-30
  - `binance_futures_weekly`: 2022-08-14 ~ 2025-12-07
  - `bitinfocharts_whale_weekly`: 2023-01-01 ~ 2025-11-30
  - **실제 사용 가능 기간**: 2023-01-01 ~ 2025-11-30 (교집합 기준)

**주요 기능:**
- 고변동성 확률 예측
- 청산 리스크 예측
- 동적 변수 분석 (변화율, 가속도, 기울기)
- 파생상품 지표 분석 (OI, 롱/숏 비율, Taker 압력)
- 거래소 유입/유출 분석

---

### 4. 📊 역사적 리스크 분석 (`historical_analysis_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표
- `bitinfocharts_whale` - 고래 집중도 데이터
- `binance_spot_weekly` - 바이낸스 현물 주봉 (주봉 분석 시)
- `binance_futures_weekly` - 바이낸스 선물 주봉 (주봉 분석 시)
- `bitinfocharts_whale_weekly` - 고래 주봉 데이터 (주봉 분석 시)

**데이터 기간:**
- **일봉 분석**: 2022-12-31 ~ 2025-11-30
- **주봉 분석**: 2023-01-01 ~ 2025-11-30

**주요 기능:**
- 과거 리스크 패턴 분석
- 모델 예측 정확도 평가
- 지표별 상관관계 분석
- 고변동성 구간 목록

---

### 5. 🔍 특성 중요도 분석 (`feature_analysis_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표
- `bitinfocharts_whale` - 고래 집중도 데이터

**데이터 기간:**
- **최소 기간**: 2022-12-31
- **최대 기간**: 2025-11-30

**주요 기능:**
- 모델 특성 중요도 분석
- SHAP 값 분석 (예측 설명)
- Partial Dependence Plot
- 특정 예측 상세 분석

---

### 6. 📈 파생상품 지표 분석 (`derivatives_analysis_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표 (펀딩비, OI)
- `futures_extended_metrics` - 확장 선물 지표 (롱/숏 비율, Taker 압력, Bybit 펀딩비)

**데이터 기간:**
- `binance_futures_metrics`: 2022-01-01 ~ 2025-12-06
- `futures_extended_metrics`: 2022-01-30 ~ 2025-12-06
- **실제 사용 가능 기간**: 2022-01-30 ~ 2025-12-06 (교집합 기준)

**주요 기능:**
- 미결제약정 (OI) 분석
- 롱/숏 비율 분석
- Taker 매수/매도 압력 분석
- 펀딩비 분석 (Binance, Bybit)
- 파생상품 지표 상관관계 분석

---

### 7. 📉 동적 변수 분석 (`dynamic_variables_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표
- `bitinfocharts_whale` - 고래 집중도 데이터

**데이터 기간:**
- **최소 기간**: 2022-12-31
- **최대 기간**: 2025-11-30

**주요 기능:**
- 동적 변수 시계열 분석 (변화율, 가속도, 기울기)
- 동적 변수와 가격 상관관계 분석
- 동적 변수 백테스트 결과
- 동적 변수 간 상관관계
- 동적 변수 기여도 분석

**참고**: 분석 결과 파일은 `data/analysis/` 디렉토리에 저장됨
- `dynamic_correlation_{coin}_*.csv`
- `dynamic_backtest_{coin}_*.csv`

---

### 8. 🔬 모델 성능 비교 (`model_comparison_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표
- `bitinfocharts_whale` - 고래 집중도 데이터

**데이터 기간:**
- **최소 기간**: 2022-12-31
- **최대 기간**: 2025-11-30

**주요 기능:**
- 모델 성능 비교 (AUC-ROC, F1 Score 등)
- 모델별 예측 결과 비교
- 특성 중요도 비교
- 동적 변수 vs 정적 변수 기여도 분석

**참고**: 평가 결과 파일은 `data/models/evaluation/` 디렉토리에 저장됨
- `model_comparison_summary.csv`
- `feature_importance.csv`

---

### 9. 📊 종합 대시보드 (`comprehensive_dashboard_page.py`)

**사용 테이블:**
- `binance_futures_metrics` - 바이낸스 선물 지표
- `bitinfocharts_whale` - 고래 집중도 데이터
- `futures_extended_metrics` - 확장 선물 지표
- `whale_daily_stats` - 고래 일일 통계

**데이터 기간:**
- **일봉 분석**: 2022-12-31 ~ 2025-11-30
- **주봉 분석**: 2023-01-01 ~ 2025-11-30

**주요 기능:**
- 리스크 점수 카드 (고변동성 확률, 청산 리스크, 종합 리스크)
- 파생상품 지표 분석
- 동적 변수 분석
- 거래소 유입/유출 분석
- 고래 데이터 가격 상관관계 분석
- 최근 리스크 이력 (30일)

**참고**: 고래 데이터 상관관계 분석 결과는 `data/analysis/` 디렉토리에 저장됨
- `whale_price_correlation_{coin}_*.csv`

---

### 10. 🤖 자동매매 봇 (`trading_bot_page.py`)

**사용 테이블:**
- (독립 모듈, 기존 데이터는 읽기 전용)

**데이터 기간:**
- N/A (실시간 API 사용)

**주요 기능:**
- 업비트 API를 통한 실시간 거래
- 자동매매 전략 실행
- 포지션 관리

---

## 📌 주요 발견 사항

### 1. 데이터 기간 불일치
- **차익거래 관련 테이블**: 2022-08-11부터 시작
- **리스크 AI 관련 테이블**: 2022-01-01 또는 2022-12-31부터 시작
- **주봉 데이터**: 2022-08-14 또는 2023-01-01부터 시작

### 2. 데이터 완전성
- **환율 데이터 (`exchange_rate`)**: 1,213건 (다른 테이블보다 적음)
  - 주말/공휴일 데이터 누락 가능성
- **고래 데이터 (`bitinfocharts_whale`)**: 2022-12-31부터 시작
  - 리스크 AI 분석의 초기 기간 제한

### 3. 코인별 데이터
- **BTC**: 모든 테이블에서 데이터 존재
- **ETH**: 대부분의 테이블에서 데이터 존재 (일부 테이블은 BTC만 지원 가능)

### 4. 주봉 vs 일봉
- **일봉 데이터**: 더 긴 기간 (2022-08-11 또는 2022-12-31부터)
- **주봉 데이터**: 더 짧은 기간 (2022-08-14 또는 2023-01-01부터)
- 주봉 분석은 노이즈 감소 효과가 있으나 데이터 기간이 제한적

---

## 🔧 권장 사항

### 1. 데이터 수집 개선
- 환율 데이터 보완 (주말/공휴일 데이터)
- 고래 데이터 과거 데이터 백필 (2022-01-01 이전)
- 주봉 데이터 기간 확장

### 2. 데이터 검증
- 각 메뉴에서 사용 가능한 실제 데이터 기간 표시
- 데이터 누락 경고 메시지 개선
- 코인별 데이터 존재 여부 확인

### 3. 문서화
- 각 메뉴의 데이터 요구사항 명시
- 데이터 기간 제한 사항 문서화
- 데이터 수집 스크립트 실행 가이드

---

**작성자**: AI Assistant  
**마지막 업데이트**: 2025-12-07

